"" -- Suggested options --
" Show a few lines of context around the cursor. Note that this makes the
" text scroll if you mouse-click near the start or end of the window.
set scrolloff=5
" Do incremental searching.
set incsearch
" Don't use Ex mode, use Q for formatting.
map Q gq

" --- Enable IdeaVim plugins https://jb.gg/ideavim-plugins
" Highlight copied text
Plug 'machakann/vim-highlightedyank'
" Commentary plugin
Plug 'tpope/vim-commentary'

" --- My Custom
let mapleader = "\"

" Use system clipboard
nnoremap yy "+yy
vnoremap y "+y
" nnoremap p "+p
" vnoremap p "+p
" nnoremap P "+P
" vnoremap P "+P
" nnoremap dd "+dd
" vnoremap d "+d

" allows copy-paste with CTRL keys for non-macos systems;
nnoremap <C-b> <C-v>

" Vim to Helix-like
nmap d <Del>
nmap x V
vmap ; <Esc>
nmap <C-k> <C-y>
nmap <C-j> <C-e>

" Folding
" map zk <Action>(CollapseRegion)
" map zo <Action>(ExpandRegion)
map ff <Action>(ExpandCollapseToggleAction)
map fK <Action>(CollapseAllRegions)
map fO <Action>(ExpandAllRegions)

" Go To
"::helix-like
noremap gg gg
noremap ge G
noremap gf gf
noremap gl $
noremap gh 0
noremap gs ^
noremap gt H
noremap gc M
noremap gb L
noremap mm %

"::IntelliJ
map g/ <Action>(CommentByLineComment)
map gd <Action>(GotoDeclaration)
map gi <Action>(GotoImplementation)
map gr <Action>(FindUsages)
map gR <Action>(ChooseRunConfiguration)
map gD <Action>(ChooseDebugConfiguration)
map gT <Action>(ActivateRunToolWindow)
map gY <Action>(ActivateDebugToolWindow)
map gB <Action>(ViewBreakpoints)
map ga <Action>(ShowHoverInfo)
map gn <Action>(NextTab)
map gp <Action>(PreviousTab)
map ]f <Action>(MethodDown)
map [f <Action>(MethodUp)
map ]g <Action>(VcsShowNextChangeMarker)
map [g <Action>(VcsShowPrevChangeMarker)
map ]d <Action>(GotoNextError)
map [d <Action>(GotoPreviousError)

" Space mode
"::helix-like
nmap <Space>f <Action>(GotoFile)
xmap <Space>f <Action>(GotoFile)
nmap <Space>F <Action>(FindInPath)
xmap <Space>F <Action>(FindInPath)
nmap <Space>b <Action>(RecentFiles)
xmap <Space>b <Action>(RecentFiles)
nmap <Space>g <Action>(RecentChangedFiles)
xmap <Space>g <Action>(RecentChangedFiles)

nmap <Space>G <Action>(Debug)
xmap <Space>G <Action>(Debug)

nmap <Space>k <Action>(QuickJavaDoc)
xmap <Space>k <Action>(QuickJavaDoc)

nmap <Space>s <Action>(FileStructurePopup)
xmap <Space>s <Action>(FileStructurePopup)
nmap <Space>S <Action>(GotoSymbol)
xmap <Space>S <Action>(GotoSymbol)

nmap <Space>d <Action>(ActivateProblemsViewToolWindow)
xmap <Space>d <Action>(ActivateProblemsViewToolWindow)
nmap <Space>D <Action>(ActivateProblemsViewToolWindow)
xmap <Space>D <Action>(ActivateProblemsViewToolWindow)

nmap <Space>c <Action>(CommentByLineComment)
xmap <Space>c <Action>(CommentByLineComment)
nmap <Space>C <Action>(CommentByBlockComment)
xmap <Space>C <Action>(CommentByBlockComment)

nmap <Space>y <Action>(EditorCopy)
xmap <Space>y <Action>(EditorCopy)
nmap <Space>R <Action>(EditorPaste)
xmap <Space>R <Action>(EditorPaste)

nmap <Space>r <Action>(RenameElement)
xmap <Space>r <Action>(RenameElement)

nmap <Space>a <Action>(ShowIntentionActions)
xmap <Space>a <Action>(ShowIntentionActions)

nmap <Space>j <Action>(RecentLocations)
xmap <Space>j <Action>(RecentLocations)

nmap <Space>/ <Action>(FindInPath)
xmap <Space>/ <Action>(FindInPath)
nmap <Space>? <Action>(GotoAction)
xmap <Space>? <Action>(GotoAction)

" Window mode
"::helix-like
noremap <Space>w <C-w>
nmap <Space>ww <Action>(NextSplitter)
xmap <Space>ww <Action>(NextSplitter)
nmap <Space>wv <Action>(SplitVertically)
xmap <Space>wv <Action>(SplitVertically)
nmap <Space>ws <Action>(SplitHorizontally)
xmap <Space>ws <Action>(SplitHorizontally)
nmap <Space>wt <Action>(ChangeSplitOrientation)
xmap <Space>wt <Action>(ChangeSplitOrientation)
nmap <Space>wq <Action>(CloseEditor)
xmap <Space>wq <Action>(CloseEditor)
"::zellij-like
map <A-h> <C-w>h
map <A-l> <C-w>l
map <A-j> <C-w>j
map <A-k> <C-w>k

" Git
map <leader>hu <Action>(Vcs.RollbackChangedLines)

" Move
map mh <Action>(com.mnw.tabmover.actions.MoveTabUpAction)
map ml <Action>(com.mnw.tabmover.actions.MoveTabDownAction)
map mj <Action>(com.mnw.tabmover.actions.MoveTabToLastAction)
map mk <Action>(com.mnw.tabmover.actions.MoveTabToFirstAction)
map mt <Action>(MoveEditorToOppositeTabGroup)

" Misc
map <Leader>b <Action>(ToggleLineBreakpoint)
map <leader>d <Action>(ToggleBreakpointEnabled)
map <Leader>c <Action>(ActivateTerminalToolWindow)
map <Leader>r <Action>(Rerun)
map <Leader>s <Action>(Stop)
map <Leader>q <Action>(HideActiveWindow)
